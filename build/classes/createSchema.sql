	create table AD.ATTACHMENT (
        ID integer generated by default as identity,
        NAME varchar(64),
        ATTACHMENT_OBJECT blob(50000000),
        ANNOTATION_ID integer not null,
        primary key (ID)
    );

    create table AD.PATIENT (
        PATIENT_PK_ID integer generated by default as identity,
        PATIENT_ID varchar(64),
        PATIENT_NAME varchar(250),
        PATIENT_SEX varchar(16),
        PATIENT_BIRTH_DATE date,
        ETHNIC_GROUP varchar(16),
        primary key (PATIENT_PK_ID)
    );
    
     create table AD.STUDY (
        STUDY_PK_ID integer generated by default as identity,
        STUDY_INSTANCE_UID varchar(500),
        STUDY_DATETIME timestamp,
        STUDY_DESC varchar(64),
        STUDY_ID varchar(16),
        PATIENT_PK_ID integer not null,
        primary key (STUDY_PK_ID)
    );
    
     create table AD.GENERAL_SERIES (
        GENERAL_SERIES_PK_ID integer generated by default as identity,
        SERIES_INSTANCE_UID varchar(64),
        MODALITY varchar(16),
        SERIES_LATERIALITY varchar(16),
        SERIES_DATETIME timestamp,
        PROTOCOL_NAME varchar(64),
        SERIES_DESC varchar(64),
        BODY_PART_EXAMINED varchar(16),
        STUDY_PK_ID integer not null,
        primary key (GENERAL_SERIES_PK_ID)
    );
    
    create table AD.GENERAL_IMAGE (
        IMAGE_PK_ID integer generated by default as identity,
        IMAGE_COMMENTS varchar(4000),
        ACQUISITION_NUMBER varchar(16),
        ACQUISITION_DATETIME timestamp,
        SLICE_THICKNESS varchar(16),
        PATIENT_ORIENTATION varchar(200),
        LOSSY_IMAGE_COMPRESSION varchar(16),
        BITS_ALLOCATED integer,
        BITS_STORED integer,
        HIGH_BIT integer,
        ROWS integer,
        COLUMNS integer,
        SAMPLES_PER_PIXEL integer,
        PIXEL_REPRESENTATION integer,
        FULL_HEADER xml,
        IMAGE_OBJECT blob(300000000),
        GENERAL_SERIES_PK_ID integer not null,
        SOP_CLASS_UID varchar(64) not null,
        SOP_INSTANCE_UID varchar(64) not null,
        TRANSFER_SYNTAX_UID varchar(64) not null,
        primary key (IMAGE_PK_ID)
    );

   

    create table AD.IMAGE_ANNOTATION (
        ANNOTATION_ID integer generated by default as identity,
        AIM_OBJECT xml,
        ANNOTATION_UID varchar(64),
        AIM_VERSION varchar(64),
        COMMENT varchar(64),
        ANNOTATION_TYPE varchar(64),
        NAME varchar(64),
        ROLE_IN_TRIAL varchar(64),
        AUTHOR_NAME varchar(64),
        GROUND_TRUTH smallint,
        DATE_TIME timestamp,
        primary key (ANNOTATION_ID)
    );

   

    create table AD.REFERENCE_IMAGES (
        IMAGE_PK_ID integer not null,
        ANNOTATION_ID integer not null,
        primary key (ANNOTATION_ID, IMAGE_PK_ID)
    );

    create table AD.AUDITTRAIL (
        auditTrailId integer generated by default as identity,
        userId integer,
        uid varchar(255),
        comment varchar(255),
        targetType varchar(255),
        timestamp timestamp,
        primary key (auditTrailId)
    );
    
    create table AD.USER (
        userId integer generated by default as identity,
        userName varchar(255),
        roleInt integer,
        primary key (userId)
    );
   
    alter table AD.ATTACHMENT 
        add constraint FKA7E14523EA3F3DD7 
        foreign key (ANNOTATION_ID) 
        references IMAGE_ANNOTATION 
        on delete cascade;

    alter table AD.AUDITTRAIL 
        add constraint FK82F2730B87C02346 
        foreign key (userId) 
        references AD.USER;
   
    alter table AD.GENERAL_IMAGE 
        add constraint FKA768F304D5B7555A 
        foreign key (GENERAL_SERIES_PK_ID) 
        references GENERAL_SERIES 
        on delete cascade;

   

    alter table AD.GENERAL_SERIES 
        add constraint FK565CE9CEDC88003D 
        foreign key (STUDY_PK_ID) 
        references STUDY 
        on delete cascade;

  

    alter table AD.REFERENCE_IMAGES 
        add constraint FK7BB5CE0CEA3F3DD7 
        foreign key (ANNOTATION_ID) 
        references IMAGE_ANNOTATION
        on delete cascade;

    alter table AD.REFERENCE_IMAGES 
        add constraint FK7BB5CE0CDD54C1E1 
        foreign key (IMAGE_PK_ID) 
        references GENERAL_IMAGE
        on delete cascade;

   

    alter table AD.STUDY 
        add constraint FK4B915A9E1C368B7 
        foreign key (PATIENT_PK_ID) 
        references PATIENT 
        on delete cascade;

create index index_sop_class_uid on AD.GENERAL_IMAGE (SOP_CLASS_UID);

create index index_sop_instance_uid on AD.GENERAL_IMAGE (SOP_INSTANCE_UID);

create index index_series_instance_uid on AD.GENERAL_SERIES (SERIES_INSTANCE_UID);

create index index_annotation_uid on AD.IMAGE_ANNOTATION (ANNOTATION_UID);

create index index_patient_birthday on AD.PATIENT (PATIENT_BIRTH_DATE);

create index index_patient_name on AD.PATIENT (PATIENT_NAME);

create index index_patient_id on AD.PATIENT (PATIENT_ID);

create index index_study_instance_uid on AD.STUDY (STUDY_INSTANCE_UID);

create index index_study_id on AD.STUDY (STUDY_ID);
    